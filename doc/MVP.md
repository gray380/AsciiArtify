# MVP: GitOps-—Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è go-demo-app –∑ –∞–≤—Ç–æ-—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é –≤ Argo CD

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î MVP-–µ—Ç–∞–ø –¥–ª—è –ø—Ä–æ—î–∫—Ç—É **AsciiArtify**.

–ù–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –º–∏:

- –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≥–æ—Ç–æ–≤–∏–π –ø—Ä–æ–¥—É–∫—Ç `go-demo-app` —è–∫ –¥–µ–º–æ-–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫;
- —Ä–æ–∑–≥–æ—Ä—Ç–∞—î–º–æ –π–æ–≥–æ –Ω–∞ Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **Argo CD**;
- –≤–º–∏–∫–∞—î–º–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é** –∑ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—î–º;
- –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î–º–æ –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª: –∑–º—ñ–Ω–∞ –≤ Git ‚Üí –∞–≤—Ç–æ-—Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ.

---

## 1. –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

–í–∏–∫–æ–Ω–∞–Ω—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –µ—Ç–∞–ø–∏:

- [doc/Concept.md](./Concept.md) ‚Äî –≤–∏–±—ñ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ (–ª–æ–∫–∞–ª—å–Ω–∏–π Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä k3d) —Ç–∞ –±–∞–∑–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏.
- [doc/POC.md](./POC.md) ‚Äî PoC –∑:
  - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –∫–ª–∞—Å—Ç–µ—Ä–∞ k3d;
  - –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è–º Argo CD —É namespace `argocd`;
  - –±–∞–∑–æ–≤–∏–º –¥–µ–ø–ª–æ—î–º –¥–µ–º–æ-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É —á–µ—Ä–µ–∑ Argo CD.

–õ–æ–∫–∞–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:

- Docker  
- k3d  
- kubectl  
- k3d-–∫–ª–∞—Å—Ç–µ—Ä (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `asciiartify`)  
- Argo CD —É namespace `argocd`  
- –î–æ—Å—Ç—É–ø –¥–æ Argo CD UI (port-forward –∞–±–æ Ingress ‚Äî –∑–≥—ñ–¥–Ω–æ –∑ PoC)

–†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –ø—Ä–æ—î–∫—Ç—É:  
`https://github.com/gray380/AsciiArtify`

---

## 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Argo CD Application –¥–ª—è go-demo-app

### 2.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é AsciiArtify

–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó `AsciiArtify` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç–∞–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

    AsciiArtify/
      doc/
        Concept.md
        POC.md
        MVP.md        # —Ü–µ–π —Ñ–∞–π–ª
      k8s/
        argocd/
          app-go-demo-app.yaml

### 2.2. –ú–∞–Ω—ñ—Ñ–µ—Å—Ç Argo CD Application

–§–∞–π–ª: `k8s/argocd/app-go-demo-app.yaml`:

    apiVersion: argoproj.io/v1alpha1
    kind: Application
    metadata:
      name: go-demo-app
      namespace: argocd
    spec:
      project: default

      source:
        repoURL: https://github.com/den-vasyliev/go-demo-app
        # –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —Å–≤—ñ–π —Ñ–æ—Ä–∫, –∑–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞:
        # repoURL: https://github.com/<your-username>/go-demo-app
        targetRevision: main
        path: yaml

      destination:
        server: https://kubernetes.default.svc
        namespace: go-demo-app

      syncPolicy:
        automated:
          prune: true      # –≤–∏–¥–∞–ª—è—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏, —â–æ –±—É–ª–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ –∑ Git
          selfHeal: true   # —Å–∞–º–æ–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ —Ä—É—á–Ω–∏—Ö –∑–º—ñ–Ω–∞—Ö —É –∫–ª–∞—Å—Ç–µ—Ä—ñ
        syncOptions:
          - CreateNamespace=true

### 2.3. –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∞

    # –ü–µ—Ä–µ–∫–æ–Ω—É—î–º–æ—Å—å, —â–æ –ø—Ä–∞—Ü—é—î–º–æ –∑ –ø–æ—Ç—Ä—ñ–±–Ω–∏–º –∫–ª–∞—Å—Ç–µ—Ä–æ–º
    kubectl config use-context k3d-asciiartify

    # –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ Application
    kubectl apply -f k8s/argocd/app-go-demo-app.yaml

    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Å–ø–∏—Å–æ–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ Argo CD
    kubectl get applications -n argocd

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤ Argo CD UI –º–∞—î –∑‚Äô—è–≤–∏—Ç–∏—Å—å –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ **go-demo-app**.  
–ü—ñ—Å–ª—è –ø–µ—Ä—à–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –≤—ñ–Ω –ø–æ–≤–∏–Ω–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –≤ —Å—Ç–∞–Ω `Synced` —Ç–∞ `Healthy`.

---

## 3. –î–µ–º–æ —Ä–æ–±–æ—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (–≤—ñ–¥–µ–æ 1)

–ú–µ—Ç–∞: –ø–æ–∫–∞–∑–∞—Ç–∏, —â–æ `go-demo-app` —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î –≤ Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä—ñ, –±—É–¥—É—á–∏ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏–º —á–µ—Ä–µ–∑ Argo CD.

### 3.1. –ö—Ä–æ–∫–∏ –¥–µ–º–æ

1. –ü–æ–∫–∞–∑ Application –≤ Argo CD UI:
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ Argo CD UI.
   - –í–∏–±—Ä–∞—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ `go-demo-app`.
   - –ü–æ–∫–∞–∑–∞—Ç–∏, —â–æ —Å—Ç–∞–Ω ‚Äî `Synced` / `Healthy`.

2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ:

       kubectl get pods -n go-demo-app
       kubectl get svc -n go-demo-app

   –ù–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –º–∞—î –±—É—Ç–∏ —Ö–æ—á–∞ –± –æ–¥–∏–Ω pod —ñ –æ–¥–∏–Ω service.

3. –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—É —á–µ—Ä–µ–∑ port-forward:

       kubectl get svc -n go-demo-app
       kubectl -n go-demo-app port-forward svc/go-demo-app 8082:80

4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É:

       curl http://localhost:8082/

   –∞–±–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ `http://localhost:8082` —É –±—Ä–∞—É–∑–µ—Ä—ñ —Ç–∞ –ø–æ–∫–∞–∑–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —Å–µ—Ä–≤—ñ—Å—É.

### 3.2. –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤—ñ–¥–µ–æ

> üîó **–í—ñ–¥–µ–æ –¥–µ–º–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É:**  
> _[–°—é–¥–∏ –≤—Å—Ç–∞–≤–∏—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤—ñ–¥–µ–æ (YouTube/Drive —Ç–æ—â–æ)]_

---

## 4. –î–µ–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó Argo CD (–≤—ñ–¥–µ–æ 2)

–ú–µ—Ç–∞: –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä—É–≤–∞—Ç–∏ GitOps-–ø–æ—Ç—ñ–∫: –∑–º—ñ–Ω–∞ –≤ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó `go-demo-app` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ —á–µ—Ä–µ–∑ Argo CD.

–†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **—Å–≤—ñ–π —Ñ–æ—Ä–∫** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é `go-demo-app`, —â–æ–± –º–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø—É—à–∏—Ç–∏ –∑–º—ñ–Ω–∏ –≤ `main`.

### 4.1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞

1. –§–æ—Ä–∫–Ω—É—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
   - –û—Ä–∏–≥—ñ–Ω–∞–ª: `https://github.com/den-vasyliev/go-demo-app`
   - –§–æ—Ä–∫: `https://github.com/<your-username>/go-demo-app`

2. –û–Ω–æ–≤–∏—Ç–∏ `repoURL` –≤ `k8s/argocd/app-go-demo-app.yaml`:

       source:
         repoURL: https://github.com/<your-username>/go-demo-app
         targetRevision: main
         path: yaml

3. –ü–µ—Ä–µ–∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ Application –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ:

       kubectl apply -f k8s/argocd/app-go-demo-app.yaml

### 4.2. –ó–º—ñ–Ω–∞ –≤ Git

1. –£ —Ñ–æ—Ä–∫—É `go-demo-app` –∑–º—ñ–Ω—é—î–º–æ –º–∞–Ω—ñ—Ñ–µ—Å—Ç, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `yaml/deployment.yaml`:

   –±—É–ª–æ:

       spec:
         replicas: 1

   —Å—Ç–∞–ª–æ:

       spec:
         replicas: 2

2. –ö–æ–º—ñ—Ç —Ç–∞ –ø—É—à:

       git add yaml/deployment.yaml
       git commit -m "MVP demo: increase replicas"
       git push origin main

### 4.3. –†–µ–∞–∫—Ü—ñ—è Argo CD (–∞–≤—Ç–æ-—Å–∏–Ω–∫)

–£ –≤—ñ–¥–µ–æ –ø–æ–∫–∞–∑–∞—Ç–∏:

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ Argo CD UI ‚Üí Application `go-demo-app`.
2. –ü—ñ—Å–ª—è –ø—É—à—É –≤ Git:
   - —Å—Ç–∞—Ç—É—Å –∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ `OutOfSync`;
   - –¥–∞–ª—ñ, –∑–∞–≤–¥—è–∫–∏ `syncPolicy.automated`, Argo CD –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î `Sync`.
3. –í –¥–µ—Ä–µ–≤—ñ —Ä–µ—Å—É—Ä—Å—ñ–≤ –≤–∏–¥–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è `Deployment` (–Ω–æ–≤–∏–π rollout).
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å pod-—ñ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ:

       kubectl get pods -n go-demo-app

   –ö—ñ–ª—å–∫—ñ—Å—Ç—å pod-—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–æ–≤–æ–º—É –∑–Ω–∞—á–µ–Ω–Ω—é `replicas` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 2 –∑–∞–º—ñ—Å—Ç—å 1).

### 4.4. –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤—ñ–¥–µ–æ

> üîó **–í—ñ–¥–µ–æ –¥–µ–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó Argo CD:**  
> _[–°—é–¥–∏ –≤—Å—Ç–∞–≤–∏—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤—ñ–¥–µ–æ]_  

---

## 5. –†–µ–∑—É–ª—å—Ç–∞—Ç MVP

–£ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è MVP:

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ —Ç—É –∂ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É, —â–æ –π —É PoC:
  - –ª–æ–∫–∞–ª—å–Ω–∏–π –∫–ª–∞—Å—Ç–µ—Ä k3d;
  - GitOps-–ø—ñ–¥—Ö—ñ–¥ –∑ Argo CD.
- –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ **Argo CD Application**, —è–∫–∏–π –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É—î Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –ø—Ä–æ–¥—É–∫—Ç—É `go-demo-app`.
- –£–≤—ñ–º–∫–Ω–µ–Ω–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é**:
  - `automated.prune` ‚Äî –≤–∏–¥–∞–ª–µ–Ω–Ω—è ¬´–∑–∞–π–≤–∏—Ö¬ª —Ä–µ—Å—É—Ä—Å—ñ–≤, —â–æ –∑–Ω–∏–∫–ª–∏ –∑ Git;
  - `automated.selfHeal` ‚Äî –≤—ñ–¥–∫–∞—Ç —Ä—É—á–Ω–∏—Ö –∑–º—ñ–Ω —É –∫–ª–∞—Å—Ç–µ—Ä—ñ –¥–æ —Å—Ç–∞–Ω—É –∑ Git.
- –ó–∞–ø–∏—Å–∞–Ω–æ –¥–≤–∞ –¥–µ–º–æ-–≤—ñ–¥–µ–æ:
  - –¥–µ–º–æ —Ä–æ–±–æ—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ–≥–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Argo CD;
  - –¥–µ–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ –º–∞–Ω—ñ—Ñ–µ—Å—Ç—ñ–≤ —É Git.

–¶–µ –∑–∞–≤–µ—Ä—à—É—î –µ—Ç–∞–ø MVP —Ç–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–æ –ø–æ–¥–∞–ª—å—à–æ–≥–æ —Ä–æ–∑–≤–∏—Ç–∫—É **AsciiArtify** —è–∫ –ø—Ä–æ–¥—É–∫—Ç—É.

